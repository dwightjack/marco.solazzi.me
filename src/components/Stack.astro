---
import type { AstroBuiltinAttributes } from 'astro';
import type { HTMLTag } from 'astro/types';
import { toStyleVars } from '../shared/utils';

export interface Props extends AstroBuiltinAttributes {
  space?: number;
  as?: HTMLTag;
  class?: string;
  [k: string]: unknown;
}

const {
  space,
  as: Tag = 'div',
  class: className,
  'class:list': classList,
  ...attrs
} = Astro.props;

const classNames = (['c-stack'] as unknown[]).concat(className, classList);
---

<Tag class:list={classNames} {...attrs} style={toStyleVars({ space })}
  ><slot />
</Tag>
<style>
  .c-stack {
    --space: 0;

    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    gap: calc(var(--space) * var(--space-unit));
    margin-block: unset;
    margin-inline: unset;
    padding-block: unset;
    padding-inline: unset;
  }

  .c-stack > :global(*) {
    margin-block: 0;
  }

  .c-stack:is(ul, ol) {
    padding-inline-start: 0;
    list-style-type: none;
  }
</style>
